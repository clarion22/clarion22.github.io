{"ast":null,"code":"import e, { PureComponent as t } from \"react\";\n\nvar n = function (e, t) {\n  return (n = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (e, t) {\n    e.__proto__ = t;\n  } || function (e, t) {\n    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);\n  })(e, t);\n};\n\nvar i = function () {\n  return (i = Object.assign || function (e) {\n    for (var t, n = 1, i = arguments.length; n < i; n++) for (var r in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);\n\n    return e;\n  }).apply(this, arguments);\n};\n\nfunction r(e, t, n, i) {\n  return new (n || (n = Promise))(function (r, a) {\n    function l(e) {\n      try {\n        s(i.next(e));\n      } catch (e) {\n        a(e);\n      }\n    }\n\n    function o(e) {\n      try {\n        s(i.throw(e));\n      } catch (e) {\n        a(e);\n      }\n    }\n\n    function s(e) {\n      var t;\n      e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n        e(t);\n      })).then(l, o);\n    }\n\n    s((i = i.apply(e, t || [])).next());\n  });\n}\n\nfunction a(e, t) {\n  var n,\n      i,\n      r,\n      a,\n      l = {\n    label: 0,\n    sent: function () {\n      if (1 & r[0]) throw r[1];\n      return r[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return a = {\n    next: o(0),\n    throw: o(1),\n    return: o(2)\n  }, \"function\" == typeof Symbol && (a[Symbol.iterator] = function () {\n    return this;\n  }), a;\n\n  function o(a) {\n    return function (o) {\n      return function (a) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n\n        for (; l;) try {\n          if (n = 1, i && (r = 2 & a[0] ? i.return : a[0] ? i.throw || ((r = i.return) && r.call(i), 0) : i.next) && !(r = r.call(i, a[1])).done) return r;\n\n          switch (i = 0, r && (a = [2 & a[0], r.value]), a[0]) {\n            case 0:\n            case 1:\n              r = a;\n              break;\n\n            case 4:\n              return l.label++, {\n                value: a[1],\n                done: !1\n              };\n\n            case 5:\n              l.label++, i = a[1], a = [0];\n              continue;\n\n            case 7:\n              a = l.ops.pop(), l.trys.pop();\n              continue;\n\n            default:\n              if (!(r = l.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== a[0] && 2 !== a[0])) {\n                l = 0;\n                continue;\n              }\n\n              if (3 === a[0] && (!r || a[1] > r[0] && a[1] < r[3])) {\n                l.label = a[1];\n                break;\n              }\n\n              if (6 === a[0] && l.label < r[1]) {\n                l.label = r[1], r = a;\n                break;\n              }\n\n              if (r && l.label < r[2]) {\n                l.label = r[2], l.ops.push(a);\n                break;\n              }\n\n              r[2] && l.ops.pop(), l.trys.pop();\n              continue;\n          }\n\n          a = t.call(e, l);\n        } catch (e) {\n          a = [6, e], i = 0;\n        } finally {\n          n = r = 0;\n        }\n\n        if (5 & a[0]) throw a[1];\n        return {\n          value: a[0] ? a[1] : void 0,\n          done: !0\n        };\n      }([a, o]);\n    };\n  }\n}\n\nvar l = i(i({\n  scale: 1,\n  perspective: 1e3,\n  flipVertically: !1,\n  flipHorizontally: !1,\n  reset: !0,\n  transitionEasing: \"cubic-bezier(.03,.98,.52,.99)\",\n  transitionSpeed: 400,\n  trackOnWindow: !1,\n  gyroscope: !1\n}, {\n  tiltEnable: !0,\n  tiltReverse: !1,\n  tiltAngleXInitial: 0,\n  tiltAngleYInitial: 0,\n  tiltMaxAngleX: 20,\n  tiltMaxAngleY: 20,\n  tiltAxis: null,\n  tiltAngleXManual: null,\n  tiltAngleYManual: null\n}), {\n  glareEnable: !1,\n  glareMaxOpacity: .7,\n  glareColor: \"#ffffff\",\n  glarePosition: \"bottom\",\n  glareReverse: !1\n});\n\nfunction o(e, t, n, i, r) {\n  return void 0 === r && (r = null), r && clearTimeout(r), e.style.transition = t + \" \" + n + \"ms \" + i, setTimeout(function () {\n    e.style.transition = \"\";\n  }, n);\n}\n\nfunction s(e, t, n) {\n  return Math.min(Math.max(e, t), n);\n}\n\nvar p = function () {\n  var e = this;\n  this.glareAngle = 0, this.glareOpacity = 0, this.tiltAngleX = 0, this.tiltAngleY = 0, this.tiltAngleXPercentage = 0, this.tiltAngleYPercentage = 0, this.update = function (t, n) {\n    e.updateTilt(t, n), e.updateTiltManualInput(t, n), e.updateTiltReverse(n), e.updateTiltLimits(n);\n  }, this.updateTilt = function (t, n) {\n    var i = t.yPercentage,\n        r = n.tiltMaxAngleY;\n    e.tiltAngleX = t.xPercentage * n.tiltMaxAngleX / 100, e.tiltAngleY = i * r / 100 * -1;\n  }, this.updateTiltManualInput = function (t, n) {\n    var i = n.tiltAngleXManual,\n        r = n.tiltAngleYManual,\n        a = n.tiltMaxAngleX,\n        l = n.tiltMaxAngleY;\n    null === i && null === r || (e.tiltAngleX = null !== i ? i : 0, e.tiltAngleY = null !== r ? r : 0, t.xPercentage = 100 * e.tiltAngleX / a, t.yPercentage = 100 * e.tiltAngleY / l);\n  }, this.updateTiltReverse = function (t) {\n    var n = t.tiltReverse ? -1 : 1;\n    e.tiltAngleX = n * e.tiltAngleX, e.tiltAngleY = n * e.tiltAngleY;\n  }, this.updateTiltLimits = function (t) {\n    var n = t.tiltAxis;\n    e.tiltAngleX = s(e.tiltAngleX, -90, 90), e.tiltAngleY = s(e.tiltAngleY, -90, 90), n && (e.tiltAngleX = \"x\" === n ? e.tiltAngleX : 0, e.tiltAngleY = \"y\" === n ? e.tiltAngleY : 0);\n  }, this.updateTiltAnglesPercentage = function (t) {\n    var n = t.tiltMaxAngleY;\n    e.tiltAngleXPercentage = e.tiltAngleX / t.tiltMaxAngleX * 100, e.tiltAngleYPercentage = e.tiltAngleY / n * 100;\n  }, this.render = function (t) {\n    t.style.transform += \"rotateX(\" + e.tiltAngleX + \"deg) rotateY(\" + e.tiltAngleY + \"deg) \";\n  };\n},\n    c = function (e) {\n  var t = this;\n  this.glareAngle = 0, this.glareOpacity = 0, this.calculateGlareSize = function (e) {\n    return {\n      width: 2 * e.width,\n      height: 2 * e.height\n    };\n  }, this.setSize = function (e) {\n    var n = t.calculateGlareSize(e);\n    t.glareEl.style.width = n.width + \"px\", t.glareEl.style.height = n.height + \"px\";\n  }, this.update = function (e, n, i, r) {\n    t.updateAngle(e, n.glareReverse), t.updateOpacity(e, n, i, r);\n  }, this.updateAngle = function (e, n) {\n    var i = e.xPercentage,\n        r = 180 / Math.PI,\n        a = i ? Math.atan2(e.yPercentage, -i) * r : 0;\n    t.glareAngle = a - (n ? 180 : 0);\n  }, this.updateOpacity = function (e, n, i, r) {\n    var a,\n        l = e.xPercentage,\n        o = e.yPercentage,\n        p = n.glareReverse,\n        c = n.glareMaxOpacity,\n        u = i ? -1 : 1,\n        g = r ? -1 : 1;\n\n    switch (n.glarePosition) {\n      case \"top\":\n        a = -l * u;\n        break;\n\n      case \"right\":\n        a = o * g;\n        break;\n\n      case \"bottom\":\n        a = l * u;\n        break;\n\n      case \"left\":\n        a = -o * g;\n        break;\n\n      case \"all\":\n        a = Math.hypot(l, o);\n        break;\n\n      default:\n        a = l * u;\n    }\n\n    var h = s(a = p ? -a : a, 0, 100);\n    t.glareOpacity = h * c / 100;\n  }, this.render = function (e) {\n    var n = e.glareColor;\n    t.glareEl.style.transform = \"rotate(\" + t.glareAngle + \"deg) translate(-50%, -50%)\", t.glareEl.style.opacity = t.glareOpacity.toString(), t.glareEl.style.background = \"linear-gradient(0deg, rgba(255,255,255,0) 0%, \" + n + \" 100%)\";\n  }, this.glareWrapperEl = document.createElement(\"div\"), this.glareEl = document.createElement(\"div\"), this.glareWrapperEl.appendChild(this.glareEl), this.glareWrapperEl.className = \"glare-wrapper\", this.glareEl.className = \"glare\";\n  var n = this.calculateGlareSize(e),\n      i = {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    \"transform-origin\": \"0% 0%\",\n    \"pointer-events\": \"none\",\n    width: n.width + \"px\",\n    height: n.height + \"px\"\n  };\n  Object.assign(this.glareWrapperEl.style, {\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    overflow: \"hidden\"\n  }), Object.assign(this.glareEl.style, i);\n},\n    u = function (t) {\n  function i() {\n    var e = null !== t && t.apply(this, arguments) || this;\n    return e.wrapperEl = {\n      node: null,\n      size: {\n        width: 0,\n        height: 0,\n        left: 0,\n        top: 0\n      },\n      clientPosition: {\n        x: null,\n        y: null,\n        xPercentage: 0,\n        yPercentage: 0\n      },\n      transitionTimeoutId: void 0,\n      updateAnimationId: null,\n      childrenImgsCounter: 0,\n      childrenImgsLength: 0,\n      scale: 1\n    }, e.tilt = null, e.glare = null, e.addDeviceOrientationEventListener = function () {\n      return r(e, void 0, void 0, function () {\n        var e;\n        return a(this, function (t) {\n          switch (t.label) {\n            case 0:\n              if (!window.DeviceOrientationEvent) return process.env.NODE_ENV && \"development\" !== process.env.NODE_ENV || console.warn(\"Browser doesn't support Device Orientation.\"), [2];\n              if (!(\"function\" == typeof DeviceMotionEvent.requestPermission)) return [3, 4];\n              t.label = 1;\n\n            case 1:\n              return t.trys.push([1, 3,, 4]), [4, DeviceOrientationEvent.requestPermission()];\n\n            case 2:\n              return \"granted\" === t.sent() && window.addEventListener(\"deviceorientation\", this.onMove), [2];\n\n            case 3:\n              return e = t.sent(), console.error(e), [2];\n\n            case 4:\n              return window.addEventListener(\"deviceorientation\", this.onMove), [2];\n          }\n        });\n      });\n    }, e.loadWrapperAndChildElements = function () {\n      var t = Array.from(e.wrapperEl.node.getElementsByTagName(\"img\"));\n      e.wrapperEl.childrenImgsLength = t.length, 0 !== e.wrapperEl.childrenImgsLength ? t.forEach(function (t) {\n        t.complete ? e.allImagesLoaded() : t.addEventListener(\"load\", e.allImagesLoaded);\n      }) : e.setSize();\n    }, e.allImagesLoaded = function () {\n      e.wrapperEl.childrenImgsCounter++, e.wrapperEl.childrenImgsCounter === e.wrapperEl.childrenImgsLength && e.setSize();\n    }, e.setSize = function () {\n      e.setWrapperElSize(), e.glare && e.glare.setSize(e.wrapperEl.size);\n    }, e.mainLoop = function (t) {\n      null !== e.wrapperEl.updateAnimationId && cancelAnimationFrame(e.wrapperEl.updateAnimationId), e.processInput(t), e.update(t.type), e.wrapperEl.updateAnimationId = requestAnimationFrame(e.renderFrame);\n    }, e.onEnter = function (t) {\n      var n = e.props.onEnter;\n      e.wrapperEl.node.style.willChange = \"transform\", e.setTransition(), n && n(t.type);\n    }, e.onMove = function (t) {\n      e.mainLoop(t), e.emitOnMove(t);\n    }, e.onLeave = function (t) {\n      var n = e.props.onLeave;\n\n      if (e.setTransition(), n && n(t.type), e.props.reset) {\n        var i = new CustomEvent(\"autoreset\");\n        e.onMove(i);\n      }\n    }, e.processInput = function (t) {\n      var n = e.props.scale;\n\n      switch (t.type) {\n        case \"mousemove\":\n          e.wrapperEl.clientPosition.x = t.pageX, e.wrapperEl.clientPosition.y = t.pageY, e.wrapperEl.scale = n;\n          break;\n\n        case \"touchmove\":\n          e.wrapperEl.clientPosition.x = t.touches[0].pageX, e.wrapperEl.clientPosition.y = t.touches[0].pageY, e.wrapperEl.scale = n;\n          break;\n\n        case \"deviceorientation\":\n          e.processInputDeviceOrientation(t), e.wrapperEl.scale = n;\n          break;\n\n        case \"autoreset\":\n          var i = e.props,\n              r = i.tiltAngleYInitial / i.tiltMaxAngleY * 100;\n          e.wrapperEl.clientPosition.xPercentage = s(i.tiltAngleXInitial / i.tiltMaxAngleX * 100, -100, 100), e.wrapperEl.clientPosition.yPercentage = s(r, -100, 100), e.wrapperEl.scale = 1;\n      }\n    }, e.processInputDeviceOrientation = function (t) {\n      if (t.gamma && t.beta && e.props.gyroscope) {\n        var n = e.props,\n            i = n.tiltMaxAngleY,\n            r = t.gamma;\n        e.wrapperEl.clientPosition.xPercentage = t.beta / n.tiltMaxAngleX * 100, e.wrapperEl.clientPosition.yPercentage = r / i * 100, e.wrapperEl.clientPosition.xPercentage = s(e.wrapperEl.clientPosition.xPercentage, -100, 100), e.wrapperEl.clientPosition.yPercentage = s(e.wrapperEl.clientPosition.yPercentage, -100, 100);\n      }\n    }, e.update = function (t) {\n      var n = e.props,\n          i = n.tiltEnable,\n          r = n.flipVertically,\n          a = n.flipHorizontally;\n      e.updateClientInput(t), i && e.tilt.update(e.wrapperEl.clientPosition, e.props), e.updateFlip(), e.tilt.updateTiltAnglesPercentage(e.props), e.glare && e.glare.update(e.wrapperEl.clientPosition, e.props, r, a);\n    }, e.updateClientInput = function (t) {\n      if (\"autoreset\" !== t && \"deviceorientation\" !== t) {\n        var n, i;\n\n        if (e.props.trackOnWindow) {\n          var r = e.wrapperEl.clientPosition,\n              a = r.x;\n          n = r.y / window.innerHeight * 200 - 100, i = a / window.innerWidth * 200 - 100;\n        } else {\n          var l = e.wrapperEl,\n              o = l.size,\n              p = l.clientPosition;\n          n = (p.y - o.top) / o.height * 200 - 100, i = ((a = p.x) - o.left) / o.width * 200 - 100;\n        }\n\n        e.wrapperEl.clientPosition.xPercentage = s(n, -100, 100), e.wrapperEl.clientPosition.yPercentage = s(i, -100, 100);\n      }\n    }, e.updateFlip = function () {\n      var t = e.props,\n          n = t.flipHorizontally;\n      t.flipVertically && (e.tilt.tiltAngleX += 180, e.tilt.tiltAngleY *= -1), n && (e.tilt.tiltAngleY += 180);\n    }, e.renderFrame = function () {\n      e.resetWrapperElTransform(), e.renderPerspective(), e.tilt.render(e.wrapperEl.node), e.renderScale(), e.glare && e.glare.render(e.props);\n    }, e;\n  }\n\n  return function (e, t) {\n    function i() {\n      this.constructor = e;\n    }\n\n    n(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i());\n  }(i, t), i.prototype.componentDidMount = function () {\n    this.loadWrapperAndChildElements(), this.tilt = new p(), this.initGlare(), this.addEventListeners();\n    var e = new CustomEvent(\"autoreset\");\n    this.mainLoop(e);\n    var t = new CustomEvent(\"initial\");\n    this.emitOnMove(t);\n  }, i.prototype.componentWillUnmount = function () {\n    clearTimeout(this.wrapperEl.transitionTimeoutId), null !== this.wrapperEl.updateAnimationId && cancelAnimationFrame(this.wrapperEl.updateAnimationId), this.removeEventListeners();\n  }, i.prototype.addEventListeners = function () {\n    var e = this.props,\n        t = e.trackOnWindow,\n        n = e.gyroscope;\n    window.addEventListener(\"resize\", this.setSize), t && (window.addEventListener(\"mouseenter\", this.onEnter), window.addEventListener(\"mousemove\", this.onMove), window.addEventListener(\"mouseout\", this.onLeave), window.addEventListener(\"touchstart\", this.onEnter), window.addEventListener(\"touchmove\", this.onMove), window.addEventListener(\"touchend\", this.onLeave)), n && this.addDeviceOrientationEventListener();\n  }, i.prototype.removeEventListeners = function () {\n    var e = this.props,\n        t = e.trackOnWindow,\n        n = e.gyroscope;\n    window.removeEventListener(\"resize\", this.setSize), t && (window.removeEventListener(\"mouseenter\", this.onEnter), window.removeEventListener(\"mousemove\", this.onMove), window.removeEventListener(\"mouseout\", this.onLeave), window.removeEventListener(\"touchstart\", this.onEnter), window.removeEventListener(\"touchmove\", this.onMove), window.removeEventListener(\"touchend\", this.onLeave)), n && window.DeviceOrientationEvent && window.removeEventListener(\"deviceorientation\", this.onMove);\n  }, i.prototype.setWrapperElSize = function () {\n    var e = this.wrapperEl.node.getBoundingClientRect();\n    this.wrapperEl.size.width = this.wrapperEl.node.offsetWidth, this.wrapperEl.size.height = this.wrapperEl.node.offsetHeight, this.wrapperEl.size.left = e.left + window.scrollX, this.wrapperEl.size.top = e.top + window.scrollY;\n  }, i.prototype.initGlare = function () {\n    this.props.glareEnable && (this.glare = new c(this.wrapperEl.size), this.wrapperEl.node.appendChild(this.glare.glareWrapperEl));\n  }, i.prototype.emitOnMove = function (e) {\n    var t = this.props.onMove;\n\n    if (t) {\n      var n = 0,\n          i = 0;\n      this.glare && (n = this.glare.glareAngle, i = this.glare.glareOpacity), t(this.tilt.tiltAngleX, this.tilt.tiltAngleY, this.tilt.tiltAngleXPercentage, this.tilt.tiltAngleYPercentage, n, i, e.type);\n    }\n  }, i.prototype.resetWrapperElTransform = function () {\n    this.wrapperEl.node.style.transform = \"\";\n  }, i.prototype.renderPerspective = function () {\n    this.wrapperEl.node.style.transform += \"perspective(\" + this.props.perspective + \"px) \";\n  }, i.prototype.renderScale = function () {\n    var e = this.wrapperEl.scale;\n    this.wrapperEl.node.style.transform += \"scale3d(\" + e + \",\" + e + \",\" + e + \")\";\n  }, i.prototype.setTransition = function () {\n    var e = this.props,\n        t = e.transitionSpeed,\n        n = e.transitionEasing;\n    this.wrapperEl.transitionTimeoutId = o(this.wrapperEl.node, \"all\", t, n, this.wrapperEl.transitionTimeoutId), this.glare && (this.glare.transitionTimeoutId = o(this.glare.glareEl, \"opacity\", t, n, this.glare.transitionTimeoutId));\n  }, i.prototype.render = function () {\n    var t = this,\n        n = this.props;\n    return e.createElement(\"div\", {\n      ref: function (e) {\n        return t.wrapperEl.node = e;\n      },\n      onMouseEnter: this.onEnter,\n      onMouseMove: this.onMove,\n      onMouseLeave: this.onLeave,\n      onTouchStart: this.onEnter,\n      onTouchMove: this.onMove,\n      onTouchEnd: this.onLeave,\n      className: n.className,\n      style: n.style\n    }, n.children);\n  }, i.defaultProps = l, i;\n}(t);\n\nexport default u;","map":{"version":3,"sources":["../src/features/tilt/defaultProps.ts","../src/react-parallax-tilt/defaultProps.ts","../src/features/glare/defaultProps.ts","../src/common/utils.ts","../src/features/tilt/Tilt.ts","../src/features/glare/Glare.ts","../src/react-parallax-tilt/ReactParallaxTilt.tsx"],"names":["tiltEnable","tiltReverse","tiltAngleXInitial","tiltAngleYInitial","tiltMaxAngleX","tiltMaxAngleY","tiltAxis","tiltAngleXManual","tiltAngleYManual","defaultProps","scale","perspective","flipVertically","flipHorizontally","reset","transitionEasing","transitionSpeed","trackOnWindow","gyroscope","glareEnable","glareMaxOpacity","glareColor","glarePosition","glareReverse","setTransition","element","property","duration","timing","timeoutId","clearTimeout","style","transition","setTimeout","constrainToRange","value","rangeMin","rangeMax","Math","min","max","this","wrapperElClientPosition","props","_this","updateTilt","updateTiltManualInput","updateTiltReverse","updateTiltLimits","yPercentage","tiltAngleX","tiltAngleY","xPercentage","tiltAngleXPercentage","tiltAngleYPercentage","transform","wrapperElSize","glareWrapperEl","document","createElement","glareEl","appendChild","className","position","top","left","width","height","overflow","glareSize","calculateGlareSize","styleGlare","transform-origin","pointer-events","Object","assign","updateAngle","updateOpacity","rad2Deg","PI","glareAngle","atan2","flipVerticallyFactor","flipHorizontallyFactor","glareOpacityFactor","hypot","glareOpacityFactorRemoveNegative","glareOpacity","opacity","toString","background","__extends","ReactParallaxTilt","node","size","clientPosition","x","y","transitionTimeoutId","undefined","updateAnimationId","childrenImgsCounter","childrenImgsLength","loadWrapperAndChildElements","tilt","Tilt","initGlare","addEventListeners","autoreset","CustomEvent","mainLoop","initialEvent","emitOnMove","wrapperEl","cancelAnimationFrame","removeEventListeners","window","addEventListener","setSize","onEnter","onMove","onLeave","addDeviceOrientationEventListener","DeviceOrientationEvent","process","env","NODE_ENV","console","warn","DeviceMotionEvent","requestPermission","error","err_1","removeEventListener","imgs","Array","from","getElementsByTagName","length","forEach","img","complete","allImagesLoaded","setWrapperElSize","glare","rect","getBoundingClientRect","offsetWidth","offsetHeight","scrollX","scrollY","Glare","event","processInput","update","type","requestAnimationFrame","renderFrame","willChange","autoResetEvent","pageX","pageY","touches","processInputDeviceOrientation","gamma","beta","angleY","eventType","updateClientInput","updateFlip","updateTiltAnglesPercentage","xTemp","yTemp","innerHeight","innerWidth","_c","_d","resetWrapperElTransform","renderPerspective","render","renderScale","_a","React","ref","el","onMouseEnter","onMouseMove","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd"],"mappings":"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","sourcesContent":["import { TiltProps } from './types';\n\nexport const defaultTiltProps: TiltProps = {\n  tiltEnable: true,\n  tiltReverse: false,\n  tiltAngleXInitial: 0,\n  tiltAngleYInitial: 0,\n  tiltMaxAngleX: 20,\n  tiltMaxAngleY: 20,\n  tiltAxis: null,\n  tiltAngleXManual: null,\n  tiltAngleYManual: null,\n};\n","import { Props } from './types';\nimport { defaultTiltProps } from '../features/tilt/defaultProps';\nimport { defaultGlareProps } from '../features/glare/defaultProps';\n\nexport const defaultProps: Props = {\n  scale: 1,\n  perspective: 1000,\n  flipVertically: false,\n  flipHorizontally: false,\n  reset: true,\n  transitionEasing: 'cubic-bezier(.03,.98,.52,.99)',\n  transitionSpeed: 400,\n  trackOnWindow: false,\n  gyroscope: false,\n  ...defaultTiltProps,\n  ...defaultGlareProps,\n};\n","import { GlareProps } from './types';\n\nexport const defaultGlareProps: GlareProps = {\n  glareEnable: false,\n  glareMaxOpacity: 0.7,\n  glareColor: '#ffffff',\n  glarePosition: 'bottom',\n  glareReverse: false,\n};\n","export function setTransition<T extends HTMLElement>(\n  element: T,\n  property: string,\n  duration: number,\n  timing: string,\n  timeoutId: number | null = null,\n): number {\n  if (timeoutId) {\n    clearTimeout(timeoutId);\n  }\n  element.style.transition = `${property} ${duration}ms ${timing}`;\n  return setTimeout(() => {\n    element.style.transition = '';\n  }, duration) as any;\n}\n\nexport function constrainToRange(value: number, rangeMin: number, rangeMax: number): number {\n  return Math.min(Math.max(value, rangeMin), rangeMax);\n}\n","import { TiltProps } from './types';\nimport { constrainToRange } from '../../common/utils';\nimport { ClientPosition } from '../../common/types';\nimport { IStyle } from '../../common/IStyle';\n\nconst TILT_ANGLE_CONSTRAINT = 90;\n\nexport class Tilt<T extends HTMLElement> implements IStyle {\n  public glareAngle: number = 0;\n  public glareOpacity: number = 0;\n\n  public transitionTimeoutId: number | undefined;\n\n  public tiltAngleX: number = 0;\n  public tiltAngleY: number = 0;\n  public tiltAngleXPercentage: number = 0;\n  public tiltAngleYPercentage: number = 0;\n\n  public update = (wrapperElClientPosition: ClientPosition, props: TiltProps): void => {\n    this.updateTilt(wrapperElClientPosition, props);\n    this.updateTiltManualInput(wrapperElClientPosition, props);\n    this.updateTiltReverse(props);\n    this.updateTiltLimits(props);\n  };\n\n  private updateTilt = (wrapperElClientPosition: ClientPosition, props: TiltProps): void => {\n    const { xPercentage, yPercentage } = wrapperElClientPosition;\n    const { tiltMaxAngleX, tiltMaxAngleY } = props;\n\n    // Calculate tilt angle x/y\n    const tiltTowardMouse = -1;\n    this.tiltAngleX = (xPercentage! * tiltMaxAngleX!) / 100;\n    this.tiltAngleY = ((yPercentage! * tiltMaxAngleY!) / 100) * tiltTowardMouse;\n  };\n\n  private updateTiltManualInput = (wrapperElClientPosition: ClientPosition, props: TiltProps): void => {\n    const { tiltAngleXManual, tiltAngleYManual, tiltMaxAngleX, tiltMaxAngleY } = props;\n    // if manual input prop is passed, ignore other inputs\n    if (tiltAngleXManual !== null || tiltAngleYManual !== null) {\n      this.tiltAngleX = tiltAngleXManual !== null ? tiltAngleXManual! : 0;\n      this.tiltAngleY = tiltAngleYManual !== null ? tiltAngleYManual! : 0;\n      wrapperElClientPosition.xPercentage = (100 * this.tiltAngleX) / tiltMaxAngleX!;\n      wrapperElClientPosition.yPercentage = (100 * this.tiltAngleY) / tiltMaxAngleY!;\n    }\n  };\n\n  private updateTiltReverse = (props: TiltProps): void => {\n    const tiltReverse = props.tiltReverse ? -1 : 1;\n    this.tiltAngleX = tiltReverse * this.tiltAngleX;\n    this.tiltAngleY = tiltReverse * this.tiltAngleY;\n  };\n\n  private updateTiltLimits = (props: TiltProps): void => {\n    const { tiltAxis } = props;\n\n    // constrain tilt angles\n    this.tiltAngleX = constrainToRange(this.tiltAngleX, -TILT_ANGLE_CONSTRAINT, TILT_ANGLE_CONSTRAINT);\n    this.tiltAngleY = constrainToRange(this.tiltAngleY, -TILT_ANGLE_CONSTRAINT, TILT_ANGLE_CONSTRAINT);\n\n    // disable x/y axis for tilting\n    if (tiltAxis) {\n      this.tiltAngleX = tiltAxis === 'x' ? this.tiltAngleX : 0;\n      this.tiltAngleY = tiltAxis === 'y' ? this.tiltAngleY : 0;\n    }\n  };\n\n  public updateTiltAnglesPercentage = (props: TiltProps): void => {\n    const { tiltMaxAngleX, tiltMaxAngleY } = props;\n\n    this.tiltAngleXPercentage = (this.tiltAngleX / tiltMaxAngleX!) * 100;\n    this.tiltAngleYPercentage = (this.tiltAngleY / tiltMaxAngleY!) * 100;\n  };\n\n  public render = (element: T): void => {\n    element.style.transform += `rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `;\n  };\n}\n","import { GlareProps, GlareSize } from './types';\nimport { constrainToRange } from '../../common/utils';\nimport { ElementSizePosition, ClientPosition } from '../../common/types';\nimport { IStyle } from '../../common/IStyle';\n\nconst GLARE_EL_SIZE_FACTOR = 2;\n\nexport class Glare implements IStyle {\n  public glareWrapperEl: HTMLDivElement;\n  public glareEl: HTMLDivElement;\n\n  public glareAngle: number = 0;\n  public glareOpacity: number = 0;\n\n  public transitionTimeoutId: number | undefined;\n\n  constructor(wrapperElSize: ElementSizePosition) {\n    this.glareWrapperEl = document.createElement('div');\n    this.glareEl = document.createElement('div');\n    this.glareWrapperEl.appendChild(this.glareEl);\n    this.glareWrapperEl.className = 'glare-wrapper';\n    this.glareEl.className = 'glare';\n\n    const styleGlareWrapper = {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n    };\n\n    const glareSize = this.calculateGlareSize(wrapperElSize);\n    const styleGlare = {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      'transform-origin': '0% 0%',\n      'pointer-events': 'none',\n      width: `${glareSize.width}px`,\n      height: `${glareSize.height}px`,\n    };\n\n    Object.assign(this.glareWrapperEl.style, styleGlareWrapper);\n    Object.assign(this.glareEl.style, styleGlare);\n  }\n\n  private calculateGlareSize = (wrapperElSize: ElementSizePosition): GlareSize => {\n    return {\n      width: wrapperElSize.width! * GLARE_EL_SIZE_FACTOR,\n      height: wrapperElSize.height! * GLARE_EL_SIZE_FACTOR,\n    };\n  };\n\n  public setSize = (wrapperElSize: ElementSizePosition): void => {\n    const glareSize = this.calculateGlareSize(wrapperElSize);\n    this.glareEl.style.width = `${glareSize.width}px`;\n    this.glareEl.style.height = `${glareSize.height}px`;\n  };\n\n  public update = (\n    wrapperElClientPosition: ClientPosition,\n    props: GlareProps,\n    flipVertically: boolean,\n    flipHorizontally: boolean,\n  ): void => {\n    this.updateAngle(wrapperElClientPosition, props.glareReverse!);\n    this.updateOpacity(wrapperElClientPosition, props, flipVertically, flipHorizontally);\n  };\n\n  private updateAngle = (wrapperElClientPosition: ClientPosition, glareReverse: boolean): void => {\n    const { xPercentage, yPercentage } = wrapperElClientPosition;\n\n    const rad2Deg = 180 / Math.PI;\n    // top 0°, right +90°, bottom -+180°, left -90°\n    const glareAngle: number = xPercentage ? Math.atan2(yPercentage, -xPercentage) * rad2Deg : 0;\n\n    const addGlareAngle: number = glareReverse ? 180 : 0;\n    this.glareAngle = glareAngle - addGlareAngle;\n  };\n\n  private updateOpacity = (\n    wrapperElClientPosition: ClientPosition,\n    props: GlareProps,\n    flipVertically: boolean,\n    flipHorizontally: boolean,\n  ): void => {\n    const { xPercentage, yPercentage } = wrapperElClientPosition;\n    const { glarePosition, glareReverse, glareMaxOpacity } = props;\n\n    const flipVerticallyFactor = flipVertically ? -1 : 1;\n    const flipHorizontallyFactor = flipHorizontally ? -1 : 1;\n\n    let glareOpacityFactor: number;\n    switch (glarePosition) {\n      case 'top':\n        glareOpacityFactor = -xPercentage! * flipVerticallyFactor;\n        break;\n      case 'right':\n        glareOpacityFactor = yPercentage! * flipHorizontallyFactor;\n        break;\n      case 'bottom':\n        glareOpacityFactor = xPercentage! * flipVerticallyFactor;\n        break;\n      case 'left':\n        glareOpacityFactor = -yPercentage! * flipHorizontallyFactor;\n        break;\n      case 'all':\n        glareOpacityFactor = Math.hypot(xPercentage, yPercentage);\n        break;\n      default:\n        glareOpacityFactor = xPercentage! * flipVerticallyFactor;\n    }\n\n    glareOpacityFactor = glareReverse ? -glareOpacityFactor : glareOpacityFactor;\n    const glareOpacityFactorRemoveNegative: number = constrainToRange(glareOpacityFactor, 0, 100);\n    this.glareOpacity = (glareOpacityFactorRemoveNegative * glareMaxOpacity!) / 100;\n  };\n\n  public render = (props: GlareProps): void => {\n    const { glareColor } = props;\n    this.glareEl.style.transform = `rotate(${this.glareAngle}deg) translate(-50%, -50%)`;\n    this.glareEl.style.opacity = this.glareOpacity.toString();\n\n    const linearGradient: string = `linear-gradient(0deg, rgba(255,255,255,0) 0%, ${glareColor} 100%)`;\n    this.glareEl.style.background = linearGradient;\n  };\n}\n","import React, { PureComponent, MouseEvent, TouchEvent } from 'react';\n\nimport { Props, SupportedEvent, EventType, CustomEventType, WrapperElement } from './types';\nimport { defaultProps } from './defaultProps';\nimport { Tilt } from '../features/tilt/Tilt';\nimport { Glare } from '../features/glare/Glare';\nimport { setTransition, constrainToRange } from '../common/utils';\n\nclass ReactParallaxTilt extends PureComponent<Props> {\n  public static defaultProps = defaultProps;\n  private wrapperEl: WrapperElement<HTMLDivElement> = {\n    node: null,\n    size: {\n      width: 0,\n      height: 0,\n      left: 0,\n      top: 0,\n    },\n    clientPosition: {\n      x: null,\n      y: null,\n      xPercentage: 0,\n      yPercentage: 0,\n    },\n    transitionTimeoutId: undefined,\n    updateAnimationId: null,\n    childrenImgsCounter: 0,\n    childrenImgsLength: 0,\n    scale: 1,\n  };\n  private tilt: Tilt<HTMLDivElement> | null = null;\n  private glare: Glare | null = null;\n\n  public componentDidMount() {\n    this.loadWrapperAndChildElements();\n    this.tilt = new Tilt<HTMLDivElement>();\n    this.initGlare();\n    this.addEventListeners();\n    const autoreset = new CustomEvent<CustomEventType>('autoreset' as CustomEventType);\n    this.mainLoop(autoreset);\n    const initialEvent = new CustomEvent<CustomEventType>('initial' as CustomEventType);\n    this.emitOnMove(initialEvent);\n  }\n\n  public componentWillUnmount() {\n    clearTimeout(this.wrapperEl.transitionTimeoutId);\n    if (this.wrapperEl.updateAnimationId !== null) {\n      cancelAnimationFrame(this.wrapperEl.updateAnimationId);\n    }\n    this.removeEventListeners();\n  }\n\n  private addEventListeners() {\n    const { trackOnWindow, gyroscope } = this.props;\n\n    window.addEventListener('resize', this.setSize);\n\n    if (trackOnWindow) {\n      window.addEventListener('mouseenter', this.onEnter);\n      window.addEventListener('mousemove', this.onMove);\n      window.addEventListener('mouseout', this.onLeave);\n      window.addEventListener('touchstart', this.onEnter);\n      window.addEventListener('touchmove', this.onMove);\n      window.addEventListener('touchend', this.onLeave);\n    }\n\n    if (gyroscope) {\n      this.addDeviceOrientationEventListener();\n    }\n  }\n\n  /* istanbul ignore next */\n  private addDeviceOrientationEventListener = async () => {\n    if (!window.DeviceOrientationEvent) {\n      if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n        console.warn(\"Browser doesn't support Device Orientation.\");\n      }\n      return;\n    }\n\n    const iOS13OrHigherDevice = typeof DeviceMotionEvent.requestPermission === 'function';\n    if (iOS13OrHigherDevice) {\n      try {\n        const response = await DeviceOrientationEvent.requestPermission();\n        if (response === 'granted') {\n          window.addEventListener('deviceorientation', this.onMove);\n        }\n        return;\n      } catch (err) {\n        console.error(err);\n        return;\n      }\n    }\n\n    window.addEventListener('deviceorientation', this.onMove);\n  };\n\n  private removeEventListeners() {\n    const { trackOnWindow, gyroscope } = this.props;\n\n    window.removeEventListener('resize', this.setSize);\n\n    if (trackOnWindow) {\n      window.removeEventListener('mouseenter', this.onEnter);\n      window.removeEventListener('mousemove', this.onMove);\n      window.removeEventListener('mouseout', this.onLeave);\n      window.removeEventListener('touchstart', this.onEnter);\n      window.removeEventListener('touchmove', this.onMove);\n      window.removeEventListener('touchend', this.onLeave);\n    }\n\n    // jest - instance of DeviceOrientationEvent not possible\n    /* istanbul ignore next */\n    if (gyroscope && window.DeviceOrientationEvent) {\n      window.removeEventListener('deviceorientation', this.onMove);\n    }\n  }\n\n  private loadWrapperAndChildElements = () => {\n    const imgs = Array.from(this.wrapperEl.node!.getElementsByTagName('img'));\n    this.wrapperEl.childrenImgsLength = imgs.length;\n    if (this.wrapperEl.childrenImgsLength === 0) {\n      this.setSize();\n      return;\n    }\n\n    imgs.forEach((img) => {\n      // jest - images are not preloaded\n      /* istanbul ignore next */\n      if (img.complete) {\n        this.allImagesLoaded();\n      } else {\n        img.addEventListener('load', this.allImagesLoaded);\n      }\n    });\n  };\n\n  public allImagesLoaded = () => {\n    this.wrapperEl.childrenImgsCounter++;\n    if (this.wrapperEl.childrenImgsCounter === this.wrapperEl.childrenImgsLength) {\n      this.setSize();\n    }\n  };\n\n  public setSize = () => {\n    this.setWrapperElSize();\n    if (this.glare) {\n      this.glare.setSize(this.wrapperEl.size);\n    }\n  };\n\n  private setWrapperElSize() {\n    const rect = this.wrapperEl.node!.getBoundingClientRect();\n    this.wrapperEl.size.width = this.wrapperEl.node!.offsetWidth;\n    this.wrapperEl.size.height = this.wrapperEl.node!.offsetHeight;\n    this.wrapperEl.size.left = rect.left + window.scrollX;\n    this.wrapperEl.size.top = rect.top + window.scrollY;\n  }\n\n  private initGlare() {\n    const { glareEnable } = this.props;\n\n    if (!glareEnable) {\n      return;\n    }\n\n    this.glare = new Glare(this.wrapperEl.size);\n    this.wrapperEl.node!.appendChild(this.glare.glareWrapperEl);\n  }\n\n  public mainLoop = (event: SupportedEvent) => {\n    if (this.wrapperEl.updateAnimationId !== null) {\n      cancelAnimationFrame(this.wrapperEl.updateAnimationId);\n    }\n    this.processInput(event);\n    this.update(event.type);\n    this.wrapperEl.updateAnimationId = requestAnimationFrame(this.renderFrame);\n  };\n\n  private onEnter = (event: SupportedEvent) => {\n    const { onEnter } = this.props;\n\n    // increase performance by notifying browser 'transform' property is just about to get changed\n    this.wrapperEl.node!.style.willChange = 'transform';\n    this.setTransition();\n\n    if (onEnter) {\n      onEnter(event.type);\n    }\n  };\n\n  private onMove = (event: SupportedEvent): void => {\n    this.mainLoop(event);\n    this.emitOnMove(event);\n  };\n\n  private emitOnMove(event: SupportedEvent) {\n    const { onMove } = this.props;\n    if (!onMove) {\n      return;\n    }\n    let glareAngle = 0;\n    let glareOpacity = 0;\n    if (this.glare) {\n      glareAngle = this.glare.glareAngle;\n      glareOpacity = this.glare.glareOpacity;\n    }\n\n    onMove(\n      this.tilt!.tiltAngleX!,\n      this.tilt!.tiltAngleY!,\n      this.tilt!.tiltAngleXPercentage!,\n      this.tilt!.tiltAngleYPercentage!,\n      glareAngle,\n      glareOpacity,\n      event.type,\n    );\n  }\n\n  private onLeave = (event: SupportedEvent) => {\n    const { onLeave } = this.props;\n    this.setTransition();\n\n    if (onLeave) {\n      onLeave(event.type);\n    }\n\n    if (this.props.reset) {\n      const autoResetEvent = new CustomEvent<CustomEventType>('autoreset' as CustomEventType);\n      this.onMove(autoResetEvent);\n    }\n  };\n\n  private processInput = (event: SupportedEvent): void => {\n    const { scale } = this.props;\n\n    switch (event.type as EventType) {\n      case 'mousemove':\n        this.wrapperEl.clientPosition.x = (event as MouseEvent).pageX;\n        this.wrapperEl.clientPosition.y = (event as MouseEvent).pageY;\n        this.wrapperEl.scale = scale!;\n        break;\n      case 'touchmove':\n        this.wrapperEl.clientPosition.x = (event as TouchEvent).touches[0].pageX;\n        this.wrapperEl.clientPosition.y = (event as TouchEvent).touches[0].pageY;\n        this.wrapperEl.scale = scale!;\n        break;\n      // jest - instance of DeviceOrientationEvent not possible\n      /* istanbul ignore next */\n      case 'deviceorientation':\n        this.processInputDeviceOrientation(event as DeviceOrientationEvent);\n        this.wrapperEl.scale = scale!;\n        break;\n      case 'autoreset':\n        const { tiltAngleXInitial, tiltAngleYInitial, tiltMaxAngleX, tiltMaxAngleY } = this.props;\n        const xPercentage = (tiltAngleXInitial! / tiltMaxAngleX!) * 100;\n        const yPercentage = (tiltAngleYInitial! / tiltMaxAngleY!) * 100;\n        this.wrapperEl.clientPosition.xPercentage = constrainToRange(xPercentage, -100, 100);\n        this.wrapperEl.clientPosition.yPercentage = constrainToRange(yPercentage, -100, 100);\n        this.wrapperEl.scale = 1;\n        break;\n    }\n  };\n\n  // jest - instance of DeviceOrientationEvent not possible\n  /* istanbul ignore next */\n  private processInputDeviceOrientation = (event: DeviceOrientationEvent): void => {\n    if (!event.gamma || !event.beta || !this.props.gyroscope) {\n      return;\n    }\n\n    const { tiltMaxAngleX, tiltMaxAngleY } = this.props;\n\n    const angleX = event.beta; // motion of the device around the x axis in degree in the range:[-180,180]\n    const angleY = event.gamma; // motion of the device around the y axis in degree in the range:[-90,90]\n\n    this.wrapperEl.clientPosition.xPercentage = (angleX! / tiltMaxAngleX!) * 100;\n    this.wrapperEl.clientPosition.yPercentage = (angleY! / tiltMaxAngleY!) * 100;\n\n    this.wrapperEl.clientPosition.xPercentage = constrainToRange(\n      this.wrapperEl.clientPosition.xPercentage,\n      -100,\n      100,\n    );\n    this.wrapperEl.clientPosition.yPercentage = constrainToRange(\n      this.wrapperEl.clientPosition.yPercentage,\n      -100,\n      100,\n    );\n  };\n\n  private update = (eventType: EventType | string): void => {\n    const { tiltEnable, flipVertically, flipHorizontally } = this.props;\n\n    this.updateClientInput(eventType);\n    if (tiltEnable) {\n      this.tilt!.update(this.wrapperEl.clientPosition, this.props);\n    }\n    this.updateFlip();\n    this.tilt!.updateTiltAnglesPercentage(this.props);\n    if (this.glare) {\n      this.glare.update(this.wrapperEl.clientPosition, this.props, flipVertically!, flipHorizontally!);\n    }\n  };\n\n  private updateClientInput = (eventType: EventType | string): void => {\n    // on 'autoreset' event - nothing to update, everything set to default already\n    // on 'deviceorientation' event - don't calculate tilt angle, retrieved from gyroscope\n    if (eventType === 'autoreset' || eventType === 'deviceorientation') {\n      return;\n    }\n\n    const { trackOnWindow } = this.props;\n\n    let xTemp;\n    let yTemp;\n    if (trackOnWindow) {\n      const { x, y } = this.wrapperEl.clientPosition;\n\n      xTemp = (y! / window.innerHeight) * 200 - 100;\n      yTemp = (x! / window.innerWidth) * 200 - 100;\n    } else {\n      const {\n        size: { width, height, left, top },\n        clientPosition: { x, y },\n      } = this.wrapperEl;\n\n      xTemp = ((y! - top!) / height!) * 200 - 100;\n      yTemp = ((x! - left!) / width!) * 200 - 100;\n    }\n\n    this.wrapperEl.clientPosition.xPercentage = constrainToRange(xTemp, -100, 100);\n    this.wrapperEl.clientPosition.yPercentage = constrainToRange(yTemp, -100, 100);\n  };\n\n  private updateFlip = (): void => {\n    const { flipVertically, flipHorizontally } = this.props;\n\n    if (flipVertically) {\n      this.tilt!.tiltAngleX += 180;\n      this.tilt!.tiltAngleY *= -1;\n    }\n    if (flipHorizontally) {\n      this.tilt!.tiltAngleY += 180;\n    }\n  };\n\n  public renderFrame = (): void => {\n    this.resetWrapperElTransform();\n\n    this.renderPerspective();\n    this.tilt!.render(this.wrapperEl.node!);\n    this.renderScale();\n    if (this.glare) {\n      this.glare.render(this.props);\n    }\n  };\n\n  private resetWrapperElTransform(): void {\n    this.wrapperEl.node!.style.transform = '';\n  }\n\n  private renderPerspective(): void {\n    const { perspective } = this.props;\n\n    this.wrapperEl.node!.style.transform += `perspective(${perspective}px) `;\n  }\n\n  private renderScale(): void {\n    const { scale } = this.wrapperEl;\n\n    this.wrapperEl.node!.style.transform += `scale3d(${scale},${scale},${scale})`;\n  }\n\n  private setTransition() {\n    const { transitionSpeed, transitionEasing } = this.props;\n\n    this.wrapperEl.transitionTimeoutId = setTransition<HTMLDivElement>(\n      this.wrapperEl.node!,\n      'all',\n      transitionSpeed!,\n      transitionEasing!,\n      this.wrapperEl.transitionTimeoutId,\n    );\n\n    if (this.glare) {\n      this.glare.transitionTimeoutId = setTransition<HTMLDivElement>(\n        this.glare.glareEl,\n        'opacity',\n        transitionSpeed!,\n        transitionEasing!,\n        this.glare.transitionTimeoutId,\n      );\n    }\n  }\n\n  public render() {\n    const { children, className, style } = this.props;\n    return (\n      <div\n        ref={(el) => (this.wrapperEl.node = el)}\n        onMouseEnter={this.onEnter}\n        onMouseMove={this.onMove}\n        onMouseLeave={this.onLeave}\n        onTouchStart={this.onEnter}\n        onTouchMove={this.onMove}\n        onTouchEnd={this.onLeave}\n        className={className}\n        style={style}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default ReactParallaxTilt;\n"]},"metadata":{},"sourceType":"module"}